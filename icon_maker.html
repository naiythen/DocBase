<!DOCTYPE html>
<html>
<head>
    <title>Icon Generator</title>
</head>
<body style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; font-family:sans-serif; background:#f0f0f0;">

    <h3>Your Extension Icon</h3>
    <canvas id="iconCanvas" width="128" height="128" style="border:1px solid #ccc; margin-bottom:20px;"></canvas>
    
    <button onclick="downloadIcon()" style="padding:10px 20px; font-size:16px; background:#1a73e8; color:white; border:none; border-radius:4px; cursor:pointer;">Download icon.png</button>

    <script>
        const canvas = document.getElementById('iconCanvas');
        const ctx = canvas.getContext('2d');

        // 1. Draw Background (Blue Rounded Square)
        ctx.fillStyle = "#1a73e8";
        // Rounded rect logic
        const x=0, y=0, w=128, h=128, r=24;
        ctx.beginPath();
        ctx.moveTo(x+r, y);
        ctx.arcTo(x+w, y, x+w, y+h, r);
        ctx.arcTo(x+w, y+h, x, y+h, r);
        ctx.arcTo(x, y+h, x, y, r);
        ctx.arcTo(x, y, x+w, y, r);
        ctx.closePath();
        ctx.fill();

        // 2. Draw Paper Document
        ctx.fillStyle = "white";
        ctx.fillRect(34, 24, 60, 80);

        // 3. Draw "Dog ear" fold on paper
        ctx.fillStyle = "#e8e8e8";
        ctx.beginPath();
        ctx.moveTo(94, 24);
        ctx.lineTo(94, 40);
        ctx.lineTo(78, 40);
        ctx.fill();

        // 4. Draw Lines (Text lines)
        ctx.fillStyle = "#a0c2f7"; // Light blue lines
        ctx.fillRect(44, 40, 30, 4); // Short line top
        ctx.fillRect(44, 52, 40, 4);
        ctx.fillRect(44, 64, 40, 4);
        ctx.fillRect(44, 76, 40, 4);
        ctx.fillRect(44, 88, 40, 4);

        // 5. Draw Magnifying Glass (Search)
        ctx.strokeStyle = "white";
        ctx.lineWidth = 8;
        ctx.beginPath();
        ctx.arc(84, 84, 18, 0, Math.PI * 2); // Glass circle
        ctx.stroke();
        
        ctx.strokeStyle = "white"; // Handle
        ctx.lineWidth = 9;
        ctx.lineCap = "round";
        ctx.beginPath();
        ctx.moveTo(98, 98);
        ctx.lineTo(110, 110);
        ctx.stroke();

        function downloadIcon() {
            const link = document.createElement('a');
            link.download = 'icon.png';
            link.href = canvas.toDataURL();
            link.click();
        }
    </script>
</body>
</html>